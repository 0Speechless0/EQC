@echo off


set FILE_PATH=C:\backup\EQC_NEW20240119_1359.bak

if not exist "%FILE_PATH%" (
    echo "正在建立解壓縮資料..."
    copy /b EQC_NEW20240119_1359.tar.001+EQC_NEW20240119_1359.tar.002+EQC_NEW20240119_1359.tar.003+EQC_NEW20240119_1359.tar.004+EQC_NEW20240119_1359.tar.005+EQC_NEW20240119_1359.tar.006+EQC_NEW20240119_1359.tar.007+EQC_NEW20240119_1359.tar.008+EQC_NEW20240119_1359.tar.009+EQC_NEW20240119_1359.tar.010+EQC_NEW20240119_1359.tar.011+EQC_NEW20240119_1359.tar.012+EQC_NEW20240119_1359.tar.013+EQC_NEW20240119_1359.tar.014+EQC_NEW20240119_1359.tar.015+EQC_NEW20240119_1359.tar.016+EQC_NEW20240119_1359.tar.017+EQC_NEW20240119_1359.tar.018+EQC_NEW20240119_1359.tar.019+EQC_NEW20240119_1359.tar.020+EQC_NEW20240119_1359.tar.021+EQC_NEW20240119_1359.tar.022+EQC_NEW20240119_1359.tar.023+EQC_NEW20240119_1359.tar.024+EQC_NEW20240119_1359.tar.025+EQC_NEW20240119_1359.tar.026+EQC_NEW20240119_1359.tar.027+EQC_NEW20240119_1359.tar.028+EQC_NEW20240119_1359.tar.029+EQC_NEW20240119_1359.tar.030 backup.zip
    echo "正在解壓縮資料..."
    tar -xf backup.zip 
) 

echo "正在建立資料..."
"C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\SQLCMD.EXE" -S "localhost" -Q "RESTORE DATABASE EQC_NEW FROM DISK='C:\backup\EQC_NEW20240119_1359.bak' WITH RECOVERY"                     
"C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\SQLCMD.EXE" -S "localhost" -Q "ALTER LOGIN sa WITH PASSWORD = 'Ss12345'"

echo "db 使用者帳號:sa ; db 使用者密碼: Ss12345"

cd .. 
